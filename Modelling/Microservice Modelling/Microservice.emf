@namespace(uri="http://www.york.ac.uk/Microservice/1.1.0", prefix="microservice")
package microservice;


class Model{
	val Microservice[*] microservices;
}

class Microservice{
	attr String name;
	val DataClass[*] repositories;
	val Controller[*] controllers;
	val EventProducer[*] producers;
	val EventConsumer[*] consumers;
	val EventStream[*] streams;
}

class DataClass{
	attr String name;
	ref DataClass[*] relation;
	attr String[*] data;
}

class Controller{
	attr String name;
	val Action[*] actions;
}

abstract class Action{
	attr String name;
	ref DataClass subject;
	ref DataClass[*] relation;
}

class Get extends Action {}
class Post extends Action {}
class Put extends Action {}
class Delete extends Action {}

abstract class Event{
	attr String name;
}

abstract class Producer extends Event{
	ref Consumer[*]#producer consumer;
}

class EventProducer extends Producer{
	ref Action[*] triggers;
}

abstract class Consumer extends Event{
	ref Producer#consumer producer;
}

class EventConsumer extends Consumer{}

class EventStream extends Consumer, Producer{
}